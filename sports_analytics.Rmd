---
title: "Big Ideas in Sports Analytics and Statistical Tools for their Investigation"
authors:
  - name: Benjamin S. Baumer
    thanks: Use footnote for providing further information about author (webpage, alternative address)---*not* for acknowledging funding agencies. Optional.
    department: Statistical & Data Sciences
    affiliation: Smith College
    location: Northampton, MA 01063
    email: bbaumer@smith.edu
    ORCID: 0000-0002-3279-0516
  - name: Gregory J. Matthews
    department: Mathematics and Statistics
    affiliation: Loyola University Chicago
    location: Chicago, IL 60660
    email: gmatthews1@luc.edu
    ORCID: 0000-0002-8413-5097
  - name: Quang Nguyen
    department: Mathematics and Statistics
    affiliation: Loyola University Chicago
    location: Chicago, IL 60660
    email: nnguyen22@luc.edu
  - name: Katherine Evans
    affiliation: Monumental Basketball
    location: Washington, DC 20003
    email: kevans@monumentalsports.com
abstract: |
  Sports analytics---broadly defined as the pursuit of improvement in athletic performance through the analysis of data---has expanded its footprint both in the professional sports industry and in academia over the past 30 years. We connect four(?) big ideas that are common across multiple sports, and explore both the shared similarities and individual idiosyncracies of analytical approaches in each sport. While our focus is on the concepts underlying each type of analysis, any implementation necessarily involves both statistical methodologies and sources of data. Where appropriate, we outline how data, models, and knowledge of the sport combine to generate actionable insights. This paper should serve as a useful overview for anyone becoming interested in the study of sports analytics. 
keywords:
  - sports analytics
  - R packages
  - sports data
  - datasets
bibliography: [refs.bib, pkgs.bib]
biblio-style: unsrt   # use apa for WIRE
output: rticles::arxiv_article
---


```{r setup, echo=FALSE, message=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  fig.align = 'center'
)
library(tidyverse)
```

```{r pkg}
knitr::write_bib(
  c(
    "Lahman", "pitchRx", "retrosheet",
    "teamcolors",
    "ggplot2"
  ),
  file = "pkgs.bib"
)
```

```{=latex}
\newcommand{\pkg}[1]{\textbf{#1}}
```


> Charge: Given your expertise and background, a review article from your group related to the topic of Statistical tools for sports analytics (e.g. baseball) would significantly contribute to WIREs Computational Statistics.
>
> The article should critically present the current state-of-the-art research, include opposing viewpoints, and identify challenges and opportunities.


**Remember that you are writing for an interdisciplinary audience. Please be sure to discuss interdisciplinary themes, issues, debates, etc. where appropriate.** Note that the WIREs are forums for review articles, rather than primary literature describing the results of original research.

## Article Category

- Overview


## Graphical/Visual Abstract and Caption

> Include an attractive full color image to go under the text abstract and in the online Table of Contents.
You will also need to upload this as a separate file during submission.
It may be a figure or panel from the article or may be specifically designed as a visual summary. While original images are preferred, if you need to look for a thematically appropriate stock image, you can go to pixabay.com (not affiliated with Wiley) to find a free stock image with a CC0 license. Another option you have is to utilize professional illustrators with Wiley’s Graphical Abstract Design service.

> Size: The minimum resolution is 300 dpi. Please keep the image as simple as possible because it will be displayed in multiple sizes. Multiple panels and text other than labels are strongly discouraged.

> Caption: This is a narrative sentence to convey the article's essence and wider implications to a non-specialist audience. The maximum length is 50 words, but consider using 280 characters or less to facilitate social media sharing, which can increase the discoverability of your article.

# Introduction

> Introduce your topic in ~2 paragraphs, ~750 words.

> While Wiley does consider articles on preprint servers (ArXiv, bioRxiv, psyArXiv, SocArXiv, engrXiv, etc.) for submission to primary research journals, preprint articles should not be cited in WIREs manuscripts as review articles should discuss and draw conclusions only from peer-reviewed research. Remember that original research/unpublished work should also not be included as it has not yet been peer-reviewed and could put the work in jeopardy of getting published in the primary press.




- [CRAN Task View SportsAnalytics](https://github.com/beanumber/ctv-sportsanalytics)

# The expected value of a possession

In many sports, the first step towards an analytical understanding of the game is the estimation of the expected value of a game state at any given point in a sporting contest. 

Mathematically, we define $X$ to be a random variable indicating the the value of a particular game state for a team over some determined amount of time (e.g. remainder of game, quarter, period, or inning). Let $s$ be a tuple that encodes the *state* of a game. 
Then our task is to estimate:
$$
  \mathbb{E}[X | s] \,,
$$
for any state $s$. 

For simplicity, we start with baseball due to the discrete nature of the sport.  In baseball, $s$ is typically determined by two factors: the configuration of the runners on base (there are 8 possibilities) and the number of outs (3 possibilities). Thus, there $24 = 8 \cdot 3$ basic states of an inning in baseball (25, if you include the absorbing state of 3 outs), and we are often interested in the number of runs that will be scored from some state until the end of the inning.  Thus in this example using baseball, $\mathbb{E}[X | s] \,$ is the expected number of runs scored between now and the end of the inning given that the inning is currently in state $s$.  The collection of estimates $\mathbb{E}[X | s]$ for all 24 states is called the *expected run matrix*, and it is foundational in baseball analytics. 

Early work on this topic can be found in @lindsey1963investigation, which used play-by-play data to compute an empirical estimate for the mean number of runs scored in the remainder of the inning for each of these 24 possible states of an inning.  This line of work led to work analyzing all types of common baseball strategies.  For example, many baseball teams elect to attempt a sacrifice bunt with a runner on first and no one out in the inning, with the goal of moving the runner to second base, at the cost of the batter being out.  Theirs, and many subsequent analyses [@tango2007book], conclude that the sacrifice bunt is rarely worth it, because most teams would be expected to score more runs with a runner on first and no outs than they would with a runner on second and one out. 

(Comment: Page 10 of this paper (https://www.jstor.org/stable/pdf/167996.pdf) actually have the expected values that were estimated. Do we want to include an example of this table? Might be cool to compare to like the numbers we got from open WAR.)

See [blah] for examples of analytical findings that are based on the expected run matrix. 

However, this concept is easily extended to other sports. 
In American football, $s$ is determined by down, yardage to the next first down, and field position. 

Numerous papers (see @lopez2020bigger for details) have used the analysis of the expected number of points to improve fourth down strategy. 

@Pattani2012 describes ESPN's expected points metric.  

@CarrollPalmer1998 The hidden game of football.  Mentioned by Pattani and popularizing the idea of EPA.  

@nflwar, which uses an expected points model as part of the nfl war framework, uses down (1-4, seconds remaining in half, yards from endzone, yards to go (log), indicator for goal to go (GTG), and indicator for under 2 minutes (UTM).

@CarterMachol1971 estimate the expected points for 1st and 10 given a yard line (broken up into 10 yard chunks centered at a given yardline (e.g. 5, 15, 25, 35, etc. )).  This is wild that they did this in 1971!

Even in sports where the concept of a state is not so easy to define, like basketball, the value of a possession can be estimated with player tracking data [@cervone2016multiresolution].



## Win probability

A related, but different, concept is the notion of *win probability*, which is simply an estimate of the probability that either team will win the game, given its current state. 

## Other stuff

@marchi2018analyzing

@R-Lahman, @R-pitchRx, @R-retrosheet

Figure \ref{fig:chess-startup} shows a rendering of the starting chess board obtained via the \pkg{chess} package. 

```{r chess-startup, fig.cap="The starting chess board printed via the \\pkg{chess} package."}
#library(chess)
#Sys.setenv(RETICULATE_PYTHON = "my_env/bin/python3")
#game() %>% plot()
```


# Color palettes

@R-teamcolors provides color palettes for professional and amateur sports teams, as well as color and fill scale functions compatible with \pkg{ggplot2} [@R-ggplot2].
Figure \ref{fig:teamcolors} illustrates team color palettes for professional sports leagues. 


```{r teamcolors, warning=FALSE, fig.cap="Professional sports team color palettes provided by the \\pkg{teamcolors} package. ", fig.height=9}
teamcolors::show_team_col()
```


# Conclusion

Sum up the key conclusions of your review, highlighting the most promising scientific developments, directions for future research, applications, etc. The conclusion should be ~2 paragraphs, ~750 words total.



# Acknowledgments

List contributions from individuals who do not meet the criteria for authorship (for example, to recognize people who provided technical help, collation of data, writing assistance, acquisition of funding, or a department chairperson who provided general support), with permission from the individual. Thanks to anonymous reviewers are not appropriate.

# References {-}
